<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Flask Tutorial</title>
  </head>
  <body>
    {% extends "template.html" %}
    {% block content %}
    <h1> Today's Schedule </h1>

    <p id="games"></p>
  
    <script>
      var num_games = ' {{ length }} ';

      var data = JSON.parse(' {{ value | tojson | safe}}');

      for (var i = 0; i < num_games; i++) {
        document.getElementById("games").innerHTML +=  "<img src='" + data.gameWeek[0]['games'][i]['awayTeam']['logo'] + "'width=25 height=25>" +
        data.gameWeek[0]['games'][i]['awayTeam']['placeName']['default'] + "<br>" +
           "<img src='" + data.gameWeek[0]['games'][i]['homeTeam']['logo'] + "'width=25 height=25>" +
          data.gameWeek[0]['games'][i]['homeTeam']['placeName']['default'] + "<br>" +
          convertTime(data, i) 
          + "<br><br>";
      }
      //function to convert UTC time to users local time zone
      function convertTime (data, num) {

        var utc = data.gameWeek[0]['games'][num]['startTimeUTC'];
        var date = new Date(utc);
        var local_time = new Date(date.toString());
        var start24 = local_time.getHours() + ":" + local_time.getMinutes() + "0";

        return start24;
        
      }
    </script>
    
    {% endblock %}
  </body>
</html>